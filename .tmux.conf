#
# .tmux.conf
#

# change prefix from C-b to C-a
set -g prefix C-a
unbind C-b

# send C-a to other apps by pressing C-a twice
bind C-a send-prefix

# delay between prefix and command
set -sg escape-time 0
set -sg repeat-time 600

# set base index for windows and panes to 1 instead of 0
set -g base-index 1
setw -g pane-base-index 1

# reload the file with prefix-r
bind r source-file ~/.tmux.conf \; display " Reloaded ~./tmux.conf"

# enable activity alerts
setw -g monitor-activity on
set -g visual-activity on
set -g display-time 1500

# generate xterm-style function key sequences
setw -g xterm-keys on

# Clock
setw -g clock-mode-colour green
setw -g clock-mode-style 24

# history
set-option -g history-file ~/.var/lib/tmux/command-history
set-option -g history-limit 50000

# miscellaneous
set-option -g buffer-limit 102
set-option -g focus-events off
set-option -g renumber-windows on
set-option -g set-titles on
set-option -g set-titles-string '#T (#h:#S)'
set-option -g update-environment "DBUS_SESSION_BUS_ADDRESS DESKTOP_SESSION DISPLAY GNOME_KEYRING_CONTROL GNOME_KEYRING_PID GPG_AGENT_INFO GPG_AGENT_INFO ORIGCOLORTERM ORIGTERM SESSION_MANAGER SSH_AGENT_PID SSH_AUTH_SOCK SSH_CONNECTION WINDOWID XAUTHORITY XDG_SESSION_COOKIE XDG_SESSION_PATH"


# ----- window ------------------------------------------------------------------------------------
#
# set colors of window list
setw -g window-status-fg cyan
setw -g window-status-bg default
setw -g window-status-attr dim

# set colors of active window
setw -g window-status-current-fg white
setw -g window-status-current-bg red
setw -g window-status-current-attr bright
setw -g window-status-activity-attr bright

# left align window list
set -g status-justify left

# new window
bind c new-window
bind , command-prompt "rename-window '%%'"
bind . send-keys "tmux-rename-window" \; send-keys Enter

# select windows
unbind Right
bind -r Right next-window
unbind Left
bind -r Left previous-window

# go to last active window
bind a last-window

# Maximize window in tmux
set-window-option -g aggressive-resize on

# ----- panes -------------------------------------------------------------------------------------
#
# set pane colors
set -g pane-border-fg colour228
set -g pane-border-bg colour232
set -g pane-active-border-fg colour228
set -g pane-active-border-bg colour232

# set colors of command / message line
set -g message-fg colour16
set -g message-bg colour221
set -g message-attr bold

# splittng panes
unbind |
unbind -
bind | send-keys " ~/bin/tmux-panes -h" C-m
bind - send-keys " ~/bin/tmux-panes -v" C-m

# set vimish pane movement
bind h select-pane -L
bind j select-pane -D
bind k select-pane -U
bind l select-pane -R

# set pane resizing
bind -r H resize-pane -L 5
bind -r J resize-pane -D 5
bind -r K resize-pane -U 5
bind -r L resize-pane -R 5

# swap two panes
unbind x
bind x swap-pane -U

# go to last active pane
unbind y
bind y last-pane


# ----- status line -------------------------------------------------------------------------------

# Powerline symbols: ⮂ ⮃ ⮀ ⮁ ⭤
set -g status-left-length 100
set -g status-right-length 150
set -g status-interval 1
set -g status-utf8 on

set -g status-left '#[fg=colour237,bg=colour208,bold] %a %d.%b %R #[fg=colour208,bg=colour234,nobold]⮀'
set -g status-right '#{prefix_highlight}#(~/bin/tmux-cpu)'
#set -g status-right '#{prefix_highlight} | %a %Y-%m-%d %H:%M'
set -g window-status-format "#[fg=white,bg=colour234] #I:#W#[fg=colour208]#F"
set -g window-status-current-format "#[fg=colour234,bg=colour238]⮀#[fg=colour252,bg=colour238,noreverse,bold] #I:#W#[fg=colour208]#F #[fg=colour238,bg=colour234,nobold]⮀"

# set colors of status line
set -g status-fg white
set -g status-bg colour234

# sane scrolling
set -g terminal-overrides 'xterm*:smcup@:rmcup@'


# ----- colors ------------------------------------------------------------------------------------

# default terminal mode is 256color
set -g default-terminal "screen-256color"

# you may use 'colour<x>' for colors
# determine <x> with:
#     for i in {0..255}; do printf "\x1b[38;5;${i}mcolour${i} "; done;


# ----- plugins -----------------------------------------------------------------------------------
#
# plugins are installed in ~/.tmux/plugins/
#
# Install: CTRL-A + I
# Uninsall CTRL-A + Alt + u

set -g @plugin 'tmux-plugins/tpm'

# copy to system clipboard
set -g @plugin 'tmux-plugins/tmux-yank'

# tmux search
set -g @plugin 'tmux-plugins/tmux-copycat'

# highlight when you press tmux prefix key
set -g @plugin 'tmux-plugins/tmux-prefix-highlight'
set -g @prefix_highlight_fg 'white'
set -g @prefix_highlight_bg 'colour33'

# persist tmux environment across system restarts
#
# save: CTRL-A + CTRL-S
# restore: CTRL-A + CTRL-R
set -g @plugin 'tmux-plugins/tmux-resurrect'


run '~/.tmux/plugins/tpm/tpm'

